import sqlite3

connection = sqlite3.connect("lab11_data.db")
cursor = connection.cursor()
cursor.execute("PRAGMA FOREIGN_KEYS = ON")
cursor.execute("""CREATE TABLE IF NOT EXISTS –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å(
id INTEGER ,
–§–ò–û TEXT,
ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã INTEGER PRIMARY KEY
)""")
connection.commit()
cursor.execute("""CREATE TABLE IF NOT EXISTS –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞(
id INTEGER PRIMARY KEY,
–ù–∞–∑–≤–∞–Ω–∏–µ TEXT,
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–õ–µ–∫—Ü–∏–π INTEGER,
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü—Ä–∞–∫—Ç–∏–∫ INTEGER,
–ö—É—Ä—Å–æ–≤–∞—è TEXT,
"–°–∞–º–æ—Å—Ç–æ—è—Ç.—Ä–∞–±." INTEGER,
FOREIGN KEY (id) REFERENCES –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å(ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã) ON UPDATE CASCADE ON DELETE CASCADE

)""")
connection.commit()

teachers = [(6, '–ù–∞—Ç–∞–Ω –î–µ–º–∏–¥–æ–≤–∏—á –ê—Ñ–∞–Ω–∞—Å—å–µ–≤', 301), (1, '–ë—Ä–∞–≥–∏–Ω –ò–ø–∞—Ç–∏–π –ê—Ä—Ö–∏–ø–æ–≤–∏—á', 302), (7, '–¢—É—Ä–æ–≤ –ü—Ä–æ–∫–æ—Ñ–∏–π '
																							'–ï—Ä–æ—Ñ–µ–µ–≤–∏—á', 303),
			(10, '–°–∞–≤–∏–Ω –≠—Ä–Ω—Å—Ç –•–∞—Ä–ª–∞–º–æ–≤–∏—á', 304), (9, '–°–æ–ª–æ–≤—å–µ–≤ –ú–µ—á–∏—Å–ª–∞–≤ –•–∞—Ä–ª–∞–º–ø–æ–≤–∏—á', 305),
			(5, '–°—Ç–∞–Ω–∏—Å–ª–∞–≤ –ï–≤—Å–µ–µ–≤–∏—á –ë–µ–ª–æ–≤', 306), (6, '–ñ–∞–Ω–Ω–∞ –†–æ–±–µ—Ä—Ç–æ–≤–Ω–∞ –ù–∏–∫–æ–Ω–æ–≤–∞', 307),
			(5, '–ú—É—Ö–∏–Ω –ù–∏–∫–æ–Ω –î–∞–≤—ã–¥–æ–≤–∏—á', 308), (8, '–ö–æ–ø—ã–ª–æ–≤ –ú–∏—Ä –ê–Ω–∏—Å–∏–º–æ–≤–∏—á', 309), (3, '–í–æ—Ä–æ–Ω—Ü–æ–≤–∞ –ê–Ω–Ω–∞ –ò–ª—å–∏–Ω–∏—á–Ω–∞', 310)
			]


Courses = [(308, '–û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è', 90, 66, '–î–∞', 8), (301, '–ü—Ä–∞–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞', 57, 63, '–ù–µ—Ç', 4),
		   (307, '–î–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞', 49, 16, '–î–∞', 11), (306, '–§–∏–ª–æ—Å–æ—Ñ–∏—è', 45, 94, '–î–∞', 14),
		   (303, '–¢–µ–æ—Ä–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞', 49, 29, '–ù–µ—Ç', 5),
		   (304, '–û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è', 79, 76, '–ù–µ—Ç', 12), (310, '–î–∏—Å–∫—Ä–µ—Ç–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞', 30, 53, '–ù–µ—Ç', 1),
		   (309, '–¢–µ–æ—Ä–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞', 77, 62, '–î–∞', 6), (302, '–§–∏–ª–æ—Å–æ—Ñ–∏—è', 32, 40, '–ù–µ—Ç',
																					 6),
		   (305, '–ü—Ä–∞–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞', 69, 75, '–î–∞', 11)
		   ]
# cursor.executemany('INSERT INTO –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞(id, –ù–∞–∑–≤–∞–Ω–∏–µ, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–õ–µ–∫—Ü–∏–π, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü—Ä–∞–∫—Ç–∏–∫, –ö—É—Ä—Å–æ–≤–∞—è, "–°–∞–º–æ—Å—Ç–æ—è—Ç.—Ä–∞–±.") VALUES (?,'
# 				   '?,?, ?, ?, ?)',
# 				   Courses)
# connection.commit()
MENU =""""–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ?
1: –£–¥–∞–ª–∏—Ç—å
2: –î–æ–±–∞–≤–∏—Ç—å
3: –ò–∑–º–µ–Ω–∏—Ç—å
4: –í—ã–π—Ç–∏
üëâ –í–∞—à –≤—ã–±–æ—Ä : """

MENU_del ="""–ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –Ω–∞–¥–æ –∏–∑–º–µ–Ω–∏—Ç—å
	1: id
	2: –§–ò–û
	3: ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
	üëâ –í–∞—à –≤—ã–±–æ—Ä : """

user_vibor = ''
# MENU_CHOICES = ['1', '2', '3', "4"]
turn_off ="4"
while user_vibor != turn_off:
	user_vibor = input(MENU)
	# —É–¥–∞–ª–µ–Ω–∏–µ
	if user_vibor == "1":
		udalite_prep = int(input("–í–≤–µ–¥–∏—Ç–µ id –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å: "))
		cursor.executemany('DELETE FROM –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å WHERE id=udalite_prep')
		connection.commit()
	# –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
	elif user_vibor == "2":
		dabavit_prep = [( int(input("id –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è :")), input("–§–ò–û –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è: "), int(input("ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: "
																									"")))]
		cursor.executemany('INSERT INTO –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å(id, –§–ò–û, ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã) VALUES (?,?,?)', dabavit_prep)
		dabavit_course = [int(input("id_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: ")), input('–ù–∞–∑–≤–∞–Ω–∏–µ –î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: '), int(input('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–õ–µ–∫—Ü–∏–π: ')), int(input('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü—Ä–∞–∫—Ç–∏–∫: ')), input('–ö—É—Ä—Å–æ–≤–∞—è: '),
						  int(input('–°–∞–º–æ—Å—Ç–æ—è—Ç.—Ä–∞–±.: '))]
		cursor.executemany('INSERT INTO –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞(id, –ù–∞–∑–≤–∞–Ω–∏–µ, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–õ–µ–∫—Ü–∏–π, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü—Ä–∞–∫—Ç–∏–∫, –ö—É—Ä—Å–æ–≤–∞—è, '
						   '"–°–∞–º–æ—Å—Ç–æ—è—Ç.—Ä–∞–±.") VALUES (?, ?,?, ?, ?, ?)', dabavit_course)
		connection.commit()
	# –∏–∑–º–µ–Ω–µ–Ω–∏–µ
	elif user_vibor == "3" :
		user_vibor_1 = input(MENU_del)
		if user_vibor_1 =="1":
			stari_id = int(input("–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞—Ä—ã–π id –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è: "))
			id_new = int(input("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π id –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è: "))
			choisss= {"novo": id_new,"stari": stari_id}
			cursor.executemany('''UPDATE –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å SET id =:novo WHERE id=:stari_id AND –§–ò–û=:–§–ò–û''', choisss)
			connection.commit()
		elif user_vibor_1 =="2":
			stari_fio = input("–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞—Ä–æ–µ –§–ò–û –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è: ")
			new_fio = input("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –§–ò–û –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è: ")
			choisss_1 ={'novo': new_fio , "stari": stari_fio}
			cursor.execute('UPDATE –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å SET –§–ò–û =:novo WHERE id=:id AND –§–ò–û=:stari', choisss_1)
			connection.commit()
		elif user_vibor_1 =="3":
			stari_disp_id = (input("–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞—Ä—ã–π ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: "))
			new_disp_id = (input("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã: "))
			choisss_2 = {"novo":new_disp_id, "stari":stari_disp_id}
			cursor.executemany('''UPDATE –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å SET ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã =:novo WHERE –§–ò–û=:–§–ò–û AND
			ID_–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã=:stari ''', choisss_2)
			connection.commit()
			
cursor.execute("SELECT * FROM –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å")
prepadavatel = cursor.fetchall()
print(prepadavatel)
		
cursor.execute("SELECT * FROM –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞")
disciplina = cursor.fetchall()
print(disciplina)

connection.close()